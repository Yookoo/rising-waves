# 优化公共代码

各位小伙伴，大家好，欢迎来到从零开始的开源项目的第9期。针对上次我们上一期结尾提出的问题。我们来优化我们的代码，包括增加分页过滤器、增加日期、操作人、增加逻辑删除、优化实体属性显示，四个部分，下面进入实操环节：

首先我们分页过滤器。日期，操作人自动填充，逻辑删除这三个部分都是使用的my BAT is plus的功能，我们先来看一下my BAT is plus的文档操作

## 增加分页过滤器

```
PaginationInterceptor
```

虽然这些接口已经可以可以使用了，但是我们的任务并没有完成。首先我们要使用MyBatis plus的分页插件去解决我们的这个分页问题，大家可以看到，如果使用使用分页插件的话，这里这里是不能计算我们的总页数的。

## 增加日期/操作人填充

```
MetaObjectHandler
```

第二，我们还需要自动填充我们的操作日期和操作人，这样的话，通过这种方法，可以大大减轻我们在开发过程中的一些重复的代码。减轻开发的负担。



## 增加逻辑删除

```
@TableLogic
```

第三 是我们的逻辑删除，传统的开发中。我们一般情况下，是不会去真实删除数据的，如果我们需要删除某个部门、某个角色或者某个用户，我们一般做法是将其删除的状态置为true，这样方便我们恢复数据。我们在设计数据库的时候也设计了这个逻辑删除字段，在这里我们需要把这个逻辑删除交给Mybatisplus帮我们处理。

## 优化实体属性显示

最后一点也是最我们最常遇到的一个问题，下面我们来看这个情况。

1、属性可以作为参数，但是不能返回；eg. password

2、属性可以作为返回值，但是不能作为参数; eg. createTime、LoginIp



传统做法我们需要把他们分别用 XO表示，然后将Vo，do，dto之间有之间来回转化。我觉得这种方法是一世来回复制，这个效率比较低下，二是、代码写起来也比较繁琐，还要创建很多类。据表示不同的含义。阅读起来也不是那么清晰明了。

这里我通过对JSON的处理去尝试去解决这个问题。但是。不能确定能完全能解决，我们先按照我的这个想法去做，如果遇到。解决不了的情况，我们还通过传统的方法去做，但是这样至少能解决我们一部分的开发的一些麻烦事儿。

具体怎么做呢？我们来看一下。

下面给大家展示一下这个是怎么解决这些问题的











解决方法：

1、通过Query、AO(Param)、VO 解决

2、通过 @JsonIgnore

3、通过自定义注解

4、通过@JsonPropertiy





