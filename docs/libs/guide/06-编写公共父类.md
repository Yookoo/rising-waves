# 编写公共父类

## 编写BaseEntity

```java

@Getter
@Setter
public class BaseEntity implements Serializable {

	private static final long serialVersionUID = 1L;

	@TableId(value = "id", type = IdType.AUTO)
	@JsonProperty(access = JsonProperty.Access.READ_ONLY)
	@ApiModelProperty(hidden = true)
	private Long id;

	@TableField(fill = FieldFill.INSERT)
	@JsonProperty(access = JsonProperty.Access.READ_ONLY)
	@ApiModelProperty(hidden = true)
	private LocalDateTime createTime;

	@TableField(fill = FieldFill.INSERT)
	@JsonProperty(access = JsonProperty.Access.READ_ONLY)
	@ApiModelProperty(hidden = true)
	private String createBy;

	@TableField(fill = FieldFill.INSERT_UPDATE)
	@JsonProperty(access = JsonProperty.Access.READ_ONLY)
	@ApiModelProperty(hidden = true)
	private LocalDateTime updateTime;

	@TableField(fill = FieldFill.INSERT_UPDATE)
	@JsonProperty(access = JsonProperty.Access.READ_ONLY)
	@ApiModelProperty(hidden = true)
	private String updateBy;

	@TableLogic
	@JsonProperty(access = JsonProperty.Access.READ_ONLY)
	@ApiModelProperty(hidden = true)
	private Boolean deleted;

	private String remark;

}

```



## 编写BaseMapper



## 编写BaseService



## 编写BaseController

```java
public abstract class BaseController<T extends BaseEntity, S extends IService<T>> {

	@Resource
	protected HttpServletRequest request;

	@Autowired
	protected S service;

	/**
	 * 新增

	 */
	@PostMapping
	public ResponseEntity create(@Valid @RequestBody T entity) {
		boolean created = service.save(entity);
		if (created) {
			URI uri = URI.create(request.getContextPath() + entity.getId());
			return ResponseEntity.created(uri).body(WebConstants.CREATED_SUCCESS);
		}
		return ResponseEntity.badRequest().body(WebConstants.CREATED_FAILURE);
	}

	/**
	 * 删除
	 */
	@DeleteMapping("{id}")
	public ResponseEntity remove(@PathVariable Long id) {

		boolean deleted = service.removeById(id);
		if (deleted) {
			return ResponseEntity.status(HttpStatus.NO_CONTENT).body(WebConstants.DELETED_SUCCESS);
		}
		return ResponseEntity.status(HttpStatus.RESET_CONTENT).body(WebConstants.DELETED_FAILURE);
	}

	/**
	 * 修改
	 */
	@PutMapping
	public ResponseEntity update(@Valid @RequestBody T entity) {
		// 业务逻辑
		boolean updated = service.updateById(entity);
		if (updated) {
			return ResponseEntity.ok(WebConstants.UPDATED_SUCCESS);
		}
		return ResponseEntity.status(HttpStatus.RESET_CONTENT).body(WebConstants.UPDATED_FAILURE);
	}

	/**
	 * 获取
	 */
	@GetMapping("get/{id}")
	public ResponseEntity get(@PathVariable Long id) {
		T domain = service.getById(id);
		return ResponseEntity.ok(domain);
	}

	/**
	 * 分页
	 * @param num {@code int} 页码
	 * @param size {@code int} 笔数   
	 */
	@GetMapping("pages/{num}/{size}")
	public ResponseEntity pages(@PathVariable int num, @PathVariable int size, @ModelAttribute T entity) {
		Page<T> page = new Page<>(num, size);
		LambdaQueryWrapper<T> queryWrapper = Wrappers.lambdaQuery(entity);
		IPage<T> pageRes = service.page(page, queryWrapper);
		return ResponseEntity.ok(pageRes);
	}

}

```

[RestFull风格的Api设计](https://www.liaoxuefeng.com/wiki/1022910821149312/1105003357927328)



eg.

|                               |        |              |
| ----------------------------- | ------ | ------------ |
| /sys/users                    | POST   | 创建用户     |
| /sys/users/{id}               | PUT    | 更新用户     |
| /sys/users/{id}               | GET    | 查询单个用户 |
| /sys/users/{id}               | DELETE | 删除用户     |
| /sys/users/pages/{num}/{size} | GET    | 分页查询用户 |





